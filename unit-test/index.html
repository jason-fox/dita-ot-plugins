<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="copyright" content="(C) Copyright 2023"><meta name="generator" content="DITA-OT"><meta name="abstract" content="This is a Unit Testing framework for the DITA Open Toolkit. This plug-in consists of seven DITA-OT transforms and an ANT library:"><meta name="description" content="This is a Unit Testing framework for the DITA Open Toolkit. This plug-in consists of seven DITA-OT transforms and an ANT library:"><meta name="keywords" content="XSL, coverage, unit-testing, plug-in, antro, installing, GitHub Actions, continuous integration, Travis CI, Coveralls, ANT"><meta property="og:type" content="website"><meta property="og:url" content="https://jason-fox.github.io/dita-ot-plugins/unit-test/index.html"><meta property="og:title" content="Unit Test Plug-in"><meta property="og:description" content="This is a Unit Testing framework for the DITA Open Toolkit. This plug-in consists of seven DITA-OT transforms and an ANT library: Because of the nature of unit"><meta property="og:image" content="https://jason-fox.github.io/dita-ot-plugins/open-graph.svg"><meta name="twitter:title" content="Unit Test Plug-in"><meta name="twitter:description" content="This is a Unit Testing framework for the DITA Open Toolkit. This plug-in consists of seven DITA-OT transforms and an ANT library: Because of the nature of unit"><meta property="twitter:url" content="https://jason-fox.github.io/dita-ot-plugins/unit-test/index.html"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:image" content="https://jason-fox.github.io/dita-ot-plugins/open-graph.svg"><title>Unit Test Plug-in</title><script src="../js/lunr-client.js"></script><script src="https://unpkg.com/lunr/lunr.js"></script><link rel="shortcut icon" href="../favicon/favicon.svg">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm" crossorigin="anonymous"></script>
<link rel="stylesheet" type="text/css" href="../css/commonltr.css">
<link rel="stylesheet" type="text/css" href="../css/theme.css">
<link rel="stylesheet" type="text/css" href="../css/common-extended.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" integrity="sha384-Ay26V7L8bsJTsX9Sxclnvsn+hkdiwRnrjZJXqKmkIDobPgIIWBOVguEcQQLDuhfN" crossorigin="anonymous"></head><body id="unit-test-plug-in" data-bs-spy="scroll" data-bs-target="#bs-scrollspy"><div class="visually-hidden-focusable overflow-hidden p-2 bg-body-tertiary"><div class="container-xl"><a class="d-inline-flex m-1 btn btn-outline-primary btn-sm" href="#ariaid-title1">Skip to main content</a><a href="#bs-sidebar-nav" class="d-none d-md-inline-flex m-1 btn btn-outline-primary btn-sm">Skip to docs navigation</a></div></div><div class="bs-header"><header role="banner"><nav class="navbar navbar-expand-lg navbar-dark bg-primary">

  <div class="container">
    <!-- This shows the menu on mobile -->
    <div class="bd-navbar-toggle">
      <button class="navbar-toggler p-2" type="button" data-bs-toggle="offcanvas" data-bs-target="#bdSidebar" aria-controls="bdSidebar" aria-label="Toggle docs navigation">
        <i class="bi bi-list"></i>
      </button>
    </div>
    <a class="navbar-brand" href="https://www.dita-ot.org/">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 16 16">
        <path d="M6 0a.5.5 0 0 1 .5.5V3h3V.5a.5.5 0 0 1 1 0V3h1a.5.5 0 0 1 .5.5v3A3.5 3.5 0 0 1 8.5 10c-.002.434-.01.845-.04 1.22-.041.514-.126 1.003-.317 1.424a2.083 2.083 0 0 1-.97 1.028C6.725 13.9 6.169 14 5.5 14c-.998 0-1.61.33-1.974.718A1.922 1.922 0 0 0 3 16H2c0-.616.232-1.367.797-1.968C3.374 13.42 4.261 13 5.5 13c.581 0 .962-.088 1.218-.219.241-.123.4-.3.514-.55.121-.266.193-.621.23-1.09.027-.34.035-.718.037-1.141A3.5 3.5 0 0 1 4 6.5v-3a.5.5 0 0 1 .5-.5h1V.5A.5.5 0 0 1 6 0zM5 4v2.5A2.5 2.5 0 0 0 7.5 9h1A2.5 2.5 0 0 0 11 6.5V4H5z"/>
      </svg>
      <span class="align-middle">Plugins for DITA Open Toolkit</span>
    </a>
    <button class="navbar-toggler py-2 px-2" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <i class="bi bi-three-dots"></i>
    </button>
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ms-auto">
        <!--
          This is a lunr.js search box
          It requires JavaScript to function.
        -->
        <li class="nav-item d-flex align-items-center">
          <span class="nav-link py-2 pe-2"><i class="bi bi-search"></i></span>
          <form class="bd-search position-relative me-auto" onsubmit="return search(this);">
          <input type="search" class="form-control ds-input" id="search-input" placeholder="Search…" aria-label="Search for…" dir="auto" style="position: relative; vertical-align: top;">
          </form>
        </li>
        <!--
          This is a dark/light color theme toggler
          It requires JavaScript to function.
        -->
        <li class="nav-item dropdown">
          <a href="#" class="nav-link py-2 px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" data-bs-toggle="dropdown" aria-expanded="false" data-bs-display="static">
            <span class="bs-toggler-light">
              <i class="bi bi-brightness-high-fill"></i>
            </span>
            <span class="bs-toggler-dark">
              <i class="bi bi-moon-stars-fill"></i>
            </span>
            <span class="bs-toggler-auto">
              <i class="bi bi-circle-half"></i>
            </span>
            <span class="d-lg-none ms-2">Toggle theme</span>
          </a>
          <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="bd-theme" style="--bs-dropdown-min-width: 6rem;" data-bs-popper="static">
            <li>
              <button type="button" class="dropdown-item d-flex align-items-center" data-bs-theme-value="light">
                <i class="bi bi-brightness-high-fill"></i>
                <span class="ms-2">Light</span>
              </button>
            </li>
            <li>
              <button type="button" class="dropdown-item d-flex align-items-center" data-bs-theme-value="dark">
                <i class="bi bi-moon-stars-fill"></i>
                <span class="ms-2">Dark</span>
              </button>
            </li>
            <li>
              <button type="button" class="dropdown-item d-flex align-items-center" data-bs-theme-value="auto">
                <i class="bi bi-circle-half"></i>
                <span class="ms-2">Auto</span>
              </button>
            </li>
          </ul>
        </li>
      </ul>
    </div>
  </div>
</nav></header></div><div class="bs-container container-xxl bd-gutter mt-3 my-md-4" id="content"><div class="bs-sidebar"><div class="offcanvas-lg offcanvas-start" tabindex="-1" id="bdSidebar" aria-labelledby="bdSidebarOffcanvasLabel" aria-modal="true" role="dialog"><div class="offcanvas-header border-bottom"><h5 class="offcanvas-title" id="bdSidebarOffcanvasLabel">DITA Bootstrap</h5><button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close" data-bs-target="#bdSidebar"></button></div><div class="offcanvas-body"><nav role="navigation" id="bs-sidebar-nav" class="flex-column bd-links"><ul class="list-unstyled mb-0 py-3 pt-md-1"><li><div class="d-flex flex-row"><a class="d-inline-flex align-items-center flex-shrink-1 ps-3" href="../index.html">DITA-OT Plugins</a></div></li><li><div class="d-flex flex-row"><button data-bs-toggle="collapse" class="btn d-inline-flex align-items-center pe-0 active" data-bs-target="#menu-collapse-d26302e19" aria-expanded="true" aria-current="true"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="16" viewBox="0 0 16 16"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 14l6-6-6-6"/></svg></button><span data-bs-toggle="collapse" class="d-inline-flex align-items-center flex-shrink-1 ps-1 active" data-bs-target="#menu-collapse-d26302e19" aria-expanded="true" aria-current="true">Plug-Ins</span></div><div id="menu-collapse-d26302e19" class="collapse show"><ul class="list-unstyled fw-normal ps-4"><li><div class="d-flex flex-row"><a class="d-inline-flex align-items-center flex-shrink-1 ps-3" href="../audiobook/index.html">Audiobook Plug-in</a></div></li><li><div class="d-flex flex-row"><a class="d-inline-flex align-items-center flex-shrink-1 ps-3" href="../extend.css/index.html">Extended CSS Plug-in</a></div></li><li><div class="d-flex flex-row"><a class="d-inline-flex align-items-center flex-shrink-1 ps-3" href="../favicon/index.html">Favicon Plugin</a></div></li><li><div class="d-flex flex-row"><a class="d-inline-flex align-items-center flex-shrink-1 ps-3" href="../doxygen/index.html">Doxygen Plug-in</a></div></li><li><div class="d-flex flex-row"><a class="d-inline-flex align-items-center flex-shrink-1 ps-3" href="../javadoc/index.html">Javadoc Plug-in</a></div></li><li><div class="d-flex flex-row"><a class="d-inline-flex align-items-center flex-shrink-1 ps-3" href="../pandoc/index.html">Pandoc Plug-in</a></div></li><li><div class="d-flex flex-row"><a class="d-inline-flex align-items-center flex-shrink-1 ps-3" href="../passthrough/index.html">Passthrough Plugin</a></div></li><li><div class="d-flex flex-row"><a class="d-inline-flex align-items-center flex-shrink-1 ps-3" href="../postman/index.html">Postman Plug-in</a></div></li><li><div class="d-flex flex-row"><a class="d-inline-flex align-items-center flex-shrink-1 ps-3" href="../pretty-dita/index.html">DITA Prettifier Plug-in</a></div></li><li><div class="d-flex flex-row"><a class="d-inline-flex align-items-center flex-shrink-1 ps-3" href="../prismjs/index.html">Prism-JS Plug-in</a></div></li><li><div class="d-flex flex-row"><a class="d-inline-flex align-items-center flex-shrink-1 ps-3" href="../open-graph/index.html">Open Graph Plug-in</a></div></li><li><div class="d-flex flex-row"><a class="d-inline-flex align-items-center flex-shrink-1 ps-3" href="../readthedocs/index.html">ReadTheDocs Plug-in</a></div></li><li><div class="d-flex flex-row"><a class="d-inline-flex align-items-center flex-shrink-1 ps-3" href="../splash/index.html">Splash Screen Plug-in</a></div></li><li><div class="d-flex flex-row"><a class="d-inline-flex align-items-center flex-shrink-1 ps-3" href="../swagger/index.html">Swagger Plug-in</a></div></li><li><div class="d-flex flex-row"><a class="d-inline-flex align-items-center flex-shrink-1 ps-3" href="../tabs.css/index.html">CSS-only Tabs Plug-in</a></div></li><li><div class="d-flex flex-row"><a class="d-inline-flex align-items-center flex-shrink-1 ps-3" href="../translate.xliff/index.html">XLIFF Translate Plug-in</a></div></li><li><div class="d-flex flex-row"><a class="d-inline-flex align-items-center flex-shrink-1 ps-3 active" href="../unit-test/index.html">Unit Test Plug-in</a></div></li><li><div class="d-flex flex-row"><a class="d-inline-flex align-items-center flex-shrink-1 ps-3" href="../validate.svrl/index.html">DITA Validator Plug-in</a></div></li><li><div class="d-flex flex-row"><a class="d-inline-flex align-items-center flex-shrink-1 ps-3" href="../validate.svrl.text-rules/index.html">Spelling and Grammar Checker Plug-in</a></div></li><li><div class="d-flex flex-row"><a class="d-inline-flex align-items-center flex-shrink-1 ps-3" href="../watermark/index.html">Watermark Plug-in</a></div></li><li><div class="d-flex flex-row"><a class="d-inline-flex align-items-center flex-shrink-1 ps-3" href="../open-graph/index.html">Open Graph Plug-in</a></div></li></ul></div></li></ul></nav></div></div></div><main role="main" class="bs-main me-3"><article role="article" class="bs-content" aria-labelledby="ariaid-title1"><nav aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><span>Plug-Ins</span></li><li class="breadcrumb-item active" aria-current="page">Unit Test Plug-in</li></ol></nav>
    <h1 class="title text-primary" id="ariaid-title1">Unit Test Plug-in</h1>
    
    
    <div class="body"><div class="abstract">
        <p class="shortdesc text-body-secondary lead">
           This is a Unit Testing framework for the DITA Open Toolkit. This plug-in
           consists of seven DITA-OT transforms and an ANT library:
        </p>
        <p class="p">
        </p>
    </div></div>
    <article class="topic nested1" aria-labelledby="ariaid-title2" id="transforms">
        <h2 class="title text-primary" id="ariaid-title2">Transforms</h2>
        <div class="body">
            <section class="section" id="transforms__unit-testing"><h3 class="title h4 text-secondary">Unit Testing</h3>
                
                <ul class="ul">
                    <li class="li">
                       The <span class="keyword option">unit-test</span> transform allows a user to runs a sequence of <span class="keyword cmdname">dita</span>
                       commands and checks that the documents created match the expected output. This
                       is useful for regression testing, and confirming that any custom plug-ins do
                       not conflict when upgrading the base DITA-OT engine.
                    </li>
                    <li class="li">
                       The <span class="ph filepath">resource/antlib.xml</span> library offers a series of
                       convenience methods for creating DITA-OT unit tests.
                    </li>
                </ul>
            </section>
            <section class="section" id="transforms__code-coverage"><h3 class="title h4 text-secondary">Code Coverage</h3>
                
                <ul class="ul">
                    <li class="li">
                       The <span class="keyword option">token-report</span> transform checks to see if a series of tokens
                       representing all potential output values are covered by unit tests
                    </li>
                    <li class="li">
                       The <span class="keyword option">xsl-instrument</span> transform annotates an DITA-OT plug-in to
                       enable code coverage reporting
                    </li>
                    <li class="li">
                       The <span class="keyword option">xsl-deinstrument</span> transform removes the instrumentation
                       annotation from a specified plugin
                    </li>
                    <li class="li">
                       The <span class="keyword option">xsl-report</span> transform displays which templates have been
                       invoked whilst running unit tests
                    </li>
                </ul>
            </section>
            <section class="section" id="transforms__profiling"><h3 class="title h4 text-secondary">ANT Profiling</h3>
                
                <ul class="ul">
                    <li class="li">
                       The <span class="keyword option">antro</span> transform runs an ANT script profiler against a
                       specified transform and outputs a profiler JSON file
                    </li>
                    <li class="li">
                       The <span class="keyword option">antro.ui</span> transform starts up the UI for the ANT script
                       profiler, allowing a user to load a JSON file and interpret the results.
                    </li>
                </ul>
            </section>
        </div>
    </article>
    <article class="topic nested1" aria-labelledby="ariaid-title3" id="install">
    <h2 class="title text-primary" id="ariaid-title3">Install</h2>
    
    
    <div class="body"><div class="abstract">
         <span class="shortdesc text-body-secondary lead">
           Because of the nature of unit testing, this plug-in has been designed as a
           standalone plug-in without dependencies which can be installed from the command line.
        </span>
    </div>
        <p class="p">
           Run the plug-in installation command:
        </p>
        <pre class="pre codeblock border rounded language-bash scale-80"><code><span class="keyword cmdname">dita</span> <span class="keyword parmname"><span class="ph token function">install</span></span> https://github.com/jason-fox/fox.jason.unit-test/archive/master.zip</code></pre>
        <p class="p">
           The <span class="keyword cmdname">dita</span> command line tool requires no additional configuration.
        </p>
    </div>
</article>
    <article class="topic nested1" aria-labelledby="ariaid-title4" id="usage">
    <h2 class="title text-primary" id="ariaid-title4">Usage</h2>
    <div class="body">
        <div role="alert" class="note alert alert-success"><span class="note__title"><i class="pe-2 bi bi-lightbulb"></i>Tip:</span> 
            <p class="p">
               A series of test suites can be found within the plug-in at
               <code class="ph codeph">PATH_TO_DITA_OT/plugins/fox.jason.unit-test/sample</code>.
            </p>
        </div>
        <section class="section" id="usage__obtaining-a-unit-test-report"><h3 class="title h4 text-secondary">Obtaining a unit test report</h3>
            
            <p class="p">
               To run, use the <span class="keyword option">unit-test</span> transform.
            </p>
            <pre class="pre codeblock border rounded language-bash scale-80"><code><span class="keyword cmdname">dita</span> <span class="keyword parmname">--format</span> <span class="keyword option">unit-test</span> <span class="ph token punctuation">\</span>
     <span class="keyword parmname">--output</span> out <span class="ph token punctuation">\</span>
     <span class="keyword parmname">--input</span> PATH_TO_UNIT_TESTS</code></pre>
            <p class="p">
               Once the command has run, a test report file is created. Additionally, if any
               error occurs, the command will fail.
            </p>
            <div class="p">
               <strong class="ph b">Sample Test Report</strong> This is the test report from the example tests found
               within the plug-in <code class="ph codeph">sample</code> directory. Nine tests are run over
               two test suites (PDF and HTML processing) - a third test suite has been disabled.
                <figure class="fig figure w-100 mw-100 p-3" id="usage__unformatted-dita">
                    
                    <img class="image figure-img img-fluid border rounded img-fluid img-thumbnail" src="https://jason-fox.github.io/fox.jason.unit-test/results.png" alt="">
                <figcaption class="fig figure-caption"><span class="fig--title-label">Figure 1. </span>Test Report</figcaption></figure>

            </div>
            <ul class="ul">
                <li class="li">
                   If the <span class="keyword parmname">--input</span> input directory is a test suite, all tests
                   within the suite will be run.
                </li>
                <li class="li">
                   If the <span class="keyword parmname">--input</span> input directory is not a test suite, all
                   test suites directly beneath that directory will be run.
                </li>
            </ul>
        </section>
        <section class="section" id="usage__xslt-coverage-report"><h3 class="title h4 text-secondary">XSLT Coverage Report</h3>
            
            <p class="p">
               To run a XSLT Coverage Report, each DITA-OT Plug-In must be <strong class="ph b">instrumented</strong>
               - this annotates the XSLT templates within the plugin to be able to generate
               coverage information. A copy of each <code class="ph codeph">*.xsl</code> file is also saved
               with the <code class="ph codeph">*.orig</code> suffix.
            </p>
            <pre class="pre codeblock border rounded language-bash scale-80"><code><span class="keyword cmdname">dita</span> <span class="keyword parmname">--format</span> <span class="keyword option">xsl-instrument</span> <span class="ph token punctuation">\</span>
     <span class="keyword parmname">--input</span> PATH_TO_PLUG_IN</code></pre>
            <p class="p">
               To revert back to the original files just run the de-instrument transform as shown:
            </p>
            <pre class="pre codeblock border rounded language-bash scale-80"><code><span class="keyword cmdname">dita</span> <span class="keyword parmname">--format</span> <span class="keyword option">xsl-deinstrument</span> <span class="ph token punctuation">\</span>
     <span class="keyword parmname">--input</span> PATH_TO_PLUG_IN</code></pre>
            <p class="p">
               Once a Plug-In has been <strong class="ph b">instrumented</strong> the test suite should contain a
               <code class="ph codeph">template-coverage.xml</code> file which holds a list of all template
               decision points. To obtain coverage information, use the <span class="keyword option">unit-test</span>
               transform as stated previously:
            </p>
            <pre class="pre codeblock border rounded language-bash scale-80"><code><span class="keyword cmdname">dita</span> <span class="keyword parmname">--format</span> <span class="keyword option">unit-test</span> <span class="ph token punctuation">\</span>
     <span class="keyword parmname">--input</span> PATH_TO_UNIT_TESTS</code></pre>
            <ul class="ul">
                <li class="li">
                   If the <span class="keyword parmname">--input</span> input directory is a test suite, XSL
                   coverage for that test suite will be reported.
                </li>
                <li class="li">
                   If the <span class="keyword parmname">--input</span> input directory is not a test suite, XSL
                   coverage for all test suites directly beneath that directory will be reported.
                </li>
            </ul>
            <p class="p">
               Once the command has run, both a test report file and an XSL coverage report
               file are created. Additionally, if any error occurs, the command will fail.
            </p>
            <p class="p">
               It is also possible to run XSL coverage over a single test. An individual test
               can be run directly from the command line by running the default target within
               that test. This can be followed by direct invocation of the coverage report.
            </p>
            <pre class="pre codeblock border rounded language-bash scale-80"><code><span class="keyword cmdname">ant</span> <span class="keyword parmname">-f</span> PATH_TO_PLUGIN/test/TEST_NAME/build.xml
<span class="keyword cmdname">dita</span> <span class="keyword parmname">--format</span> <span class="keyword option">xsl-report</span> <span class="ph token punctuation">\</span>
     <span class="keyword parmname">--input</span> PATH_TO_PLUGIN</code></pre>
        </section>
        <section class="section" id="usage__sample-xsl-report"><h3 class="title h4 text-secondary">Sample XSL Report</h3>
            
            <p class="p">
               The XSL coverage report will show a schematic of all template decision points,
               with covered lines displayed in green, and uncovered lines displayed in red.
            </p>
            <figure class="fig figure w-100 mw-100 p-3">
                
                <img class="image figure-img img-fluid border rounded img-fluid img-thumbnail" src="https://jason-fox.github.io/fox.jason.unit-test/xsl-coverage.png" alt="">
            <figcaption class="fig figure-caption"><span class="fig--title-label">Figure 2. </span>XSL coverage</figcaption></figure>

        </section>
        <section class="section" id="usage__token-coverage-report"><h3 class="title h4 text-secondary">Token Coverage Report</h3>
            
            <p class="p">
               This is a quicker alternative report to XSLT instrumentation and code coverage,
               but it requires the developer to create the token <code class="ph codeph">coverage.xml</code>
               file manually. Each test suite should contain a <code class="ph codeph">coverage.xml</code>
               file which holds a series of tokens representing all potential output values.
               To obtain coverage information, use the <span class="keyword option">token-report</span> transform.
            </p>
            <pre class="pre codeblock border rounded language-bash scale-80"><code><span class="keyword cmdname">dita</span> <span class="keyword parmname">--format</span> <span class="keyword option">token-report</span> <span class="ph token punctuation">\</span>
     <span class="keyword parmname">--input</span> PATH_TO_UNIT_TESTS</code></pre>
            <p class="p">
               Once the command has run, a coverage report is created.
            </p>
        </section>
        <section class="section" id="usage__sample-token-report"><h3 class="title h4 text-secondary">Sample Token Report</h3>
            
            <p class="p">
               This is the token report from the example tests found within the plug-in
               <code class="ph codeph">sample</code> directory.
            </p>
            <ul class="ul">
                <li class="li">
                   Coverage for the Spell-checker is looking to ensure that all rules have been
                   run. Uncovered rules are highlighted in RED.
                </li>
                <li class="li">
                   Coverage for HTML processing is looking for the presence of <code class="keyword markupname xmlelement">&lt;codeph&gt;</code>,
                   <code class="keyword markupname xmlelement">&lt;codeblock&gt;</code> and <code class="keyword markupname xmlelement">&lt;p&gt;</code> tags being
                   rendered in the tests.
                </li>
            </ul>
            <figure class="fig figure w-100 mw-100 p-3">
                
                <img class="image figure-img img-fluid border rounded img-fluid img-thumbnail" src="https://jason-fox.github.io/fox.jason.unit-test/coverage.png" alt="">
            <figcaption class="fig figure-caption"><span class="fig--title-label">Figure 3. </span>Token report</figcaption></figure>

            <ul class="ul">
                <li class="li">
                   If the <span class="keyword parmname">--input</span> input directory is a test suite, coverage
                   for that test suite will be reported.
                </li>
                <li class="li">
                   If the <span class="keyword parmname">--input</span> input directory is not a test suite,
                   coverage for all test suites directly beneath that directory will be reported.
                </li>
            </ul>
        </section>
        <section class="section" id="usage__obtaining-ant-script-profile-information"><h3 class="title h4 text-secondary">Obtaining ANT script profile information</h3>
            
            <p class="p">
               <strong class="ph b">Antro</strong> is a hierarchical and line-level profiler for Ant build scripts. It
               can be run to check which ANT scripts have been invoked and how long they took.
            </p>
            <p class="p">
               To obtain profile information, use the <span class="keyword option">antro</span> transform and
               supply an additional test transtype.
            </p>
            <pre class="pre codeblock border rounded language-bash scale-80"><code><span class="keyword cmdname">dita</span> <span class="keyword parmname">--format</span> <span class="keyword option">antro</span><span class="keyword parmname">--test.transform</span><span class="ph token operator">=</span>TRANSFORM_TO_PROFILE <span class="ph token punctuation">\</span>
     <span class="keyword parmname">--input</span> document.ditamap</code></pre>
            <p class="p">
               A profiler JSON file will be generated.
            </p>
        </section>
        <section class="section" id="usage__viewing-profiler-information"><h3 class="title h4 text-secondary">Viewing profiler information</h3>
            
            <p class="p">
               To run the UI for the Antro profiler, use the <span class="keyword option">antro-ui</span>
               transform. The <span class="keyword parmname">--input</span> parameter is mandatory for all
               DITA-OT plug-ins, and should point to a real file, but is not used for this
               transform.
            </p>
            <pre class="pre codeblock border rounded"><code><span class="keyword cmdname">dita</span> <span class="keyword parmname">--format</span> <span class="keyword option">antro-ui</span> \
     <span class="keyword parmname">--input</span> document.ditamap</code></pre>
            <p class="p">
               The Antro UI is the displayed, load the profiler json file from to display a bar
               graph showing how long each ANT target took:
            </p>
            <p class="p">
               <strong class="ph b">Sample Antro Display</strong> The Profiler was run against the <span class="keyword option">pdf</span>
               transform, FOP processing took 16s
            </p>
            <figure class="fig figure w-100 mw-100 p-3">
                
                <img class="image figure-img img-fluid border rounded img-fluid img-thumbnail" src="https://jason-fox.github.io/fox.jason.unit-test/profiler-bar.png" alt="">
            <figcaption class="fig figure-caption"><span class="fig--title-label">Figure 4. </span>Antro</figcaption></figure>

            <p class="p">
               You can drill down to an individual line to see if it has been invoked and how
               long it took:
            </p>
            <figure class="fig figure w-100 mw-100 p-3">
                
                <img class="image figure-img img-fluid border rounded img-fluid img-thumbnail" src="https://jason-fox.github.io/fox.jason.unit-test/profiler.png" alt="">
            <figcaption class="fig figure-caption"><span class="fig--title-label">Figure 5. </span>Antro Details</figcaption></figure>

        </section>
        <section class="section" id="usage__parameter-reference"><h3 class="title h4 text-secondary">Parameter Reference</h3>
            
               
               
               
               
            <ul class="ul">
                <li class="li">
                   <span class="keyword parmname">test.colorize</span> - When set, successes and failures are output
                   highlighted using ANSI color codes
                </li>
                <li class="li">
                   <span class="keyword parmname">test.copy</span> - Specifies whether regenerated expecations
                   should be copied. Default is <span class="keyword option">false</span>
                </li>
                <li class="li">
                   <span class="keyword parmname">test.transtype</span> - The real transtype to run the antro
                   profiler against
                </li>
                <li class="li">
                   <span class="keyword parmname">test.propertyfile</span> - A properties file to use when running
                   the unit tests or antro profiler
                </li>
            </ul>
        </section>
    </div>
    <article class="topic nested2" aria-labelledby="ariaid-title5" id="github-actions">
    <h3 class="title text-primary" id="ariaid-title5">Integration with GitHub Actions.</h3>
    
    <div class="body">
        <div class="div row">
            <div class="div">
                <img class="image float-start mt-1 me-3" src="https://github.githubassets.com/images/modules/site/features/actions-icon-actions.svg" height="55">
                <p class="p">
                   <dfn class="term">GitHub Actions</dfn> are a CI/CD environment integrated directly with
                   GitHub. More information about how to set up GitHub Actions can be found on the
                   <a class="xref" href="https://docs.github.com/en/free-pro-team@latest/actions" target="_blank" rel="external noopener">GitHub website</a>.
                </p>
            </div>
        </div>
        <figure class="fig figure w-100 mw-100 p-3">
            
            <img class="image figure-img img-fluid border rounded img-fluid img-thumbnail" src="https://jason-fox.github.io/fox.jason.unit-test/github-actions.png" alt="">
        <figcaption class="fig figure-caption"><span class="fig--title-label">Figure 6. </span>GitHub Actions</figcaption></figure>

        <p class="p">
           A GitHub Action has been created to automate your <a class="xref" href="https://github.com/jason-fox/dita-unit-test-action" target="_blank" rel="external noopener">DITA-OT Plugin testing</a>. To add automated CI/CD testing
           of your DITA-OT plug-ins, place your tests under a <code class="ph codeph">test</code>
           directory under the root of the repository along with the <code class="ph codeph">ci.yml</code>
           in the <span class="ph filepath">.github/workflows</span> directory.
        </p>
        <pre class="pre codeblock border rounded language-yaml scale-80"><code><span class="ph token key atrule">name</span><span class="ph token punctuation">:</span> CI
<span class="ph token key atrule">'on'</span><span class="ph token punctuation">:</span>
  <span class="ph token key atrule">push</span><span class="ph token punctuation">:</span>
    <span class="ph token key atrule">branches</span><span class="ph token punctuation">:</span>
      <span class="ph token punctuation">-</span> master
  <span class="ph token key atrule">pull_request</span><span class="ph token punctuation">:</span>
    <span class="ph token key atrule">branches</span><span class="ph token punctuation">:</span>
      <span class="ph token punctuation">-</span> master
<span class="ph token key atrule">jobs</span><span class="ph token punctuation">:</span>
  <span class="ph token key atrule">unit-test</span><span class="ph token punctuation">:</span>
    <span class="ph token key atrule">name</span><span class="ph token punctuation">:</span> Unit Tests
    <span class="ph token key atrule">runs-on</span><span class="ph token punctuation">:</span> ubuntu<span class="ph token punctuation">-</span>latest
    <span class="ph token key atrule">steps</span><span class="ph token punctuation">:</span>
      <span class="ph token punctuation">-</span> <span class="ph token key atrule">name</span><span class="ph token punctuation">:</span> Git checkout
        <span class="ph token key atrule">uses</span><span class="ph token punctuation">:</span> actions/checkout@v3
      <span class="ph token punctuation">-</span> <span class="ph token key atrule">name</span><span class="ph token punctuation">:</span> Run DITA<span class="ph token punctuation">-</span>OT Unit Test
        <span class="ph token key atrule">uses</span><span class="ph token punctuation">:</span> jason<span class="ph token punctuation">-</span>fox/dita<span class="ph token punctuation">-</span>unit<span class="ph token punctuation">-</span>test<span class="ph token punctuation">-</span>action@master
        <span class="ph token key atrule">with</span><span class="ph token punctuation">:</span>
          <span class="ph token key atrule">plugin</span><span class="ph token punctuation">:</span> <span class="ph token string">'com.oxygenxml.editlink'</span>
      <span class="ph token punctuation">-</span> <span class="ph token key atrule">uses</span><span class="ph token punctuation">:</span> actions/upload<span class="ph token punctuation">-</span>artifact@v3
        <span class="ph token key atrule">if</span><span class="ph token punctuation">:</span> always()
        <span class="ph token key atrule">with</span><span class="ph token punctuation">:</span>
          <span class="ph token key atrule">name</span><span class="ph token punctuation">:</span> test<span class="ph token punctuation">-</span>results
          <span class="ph token key atrule">path</span><span class="ph token punctuation">:</span> test<span class="ph token punctuation">-</span>results.html</code></pre>
        <ul class="ul">
            <li class="li">
               <span class="keyword parmname">plugin</span> - <strong class="ph b">Required</strong> The name of the DITA-OT plugin to
               install and test.
            </li>
            <li class="li">
               <span class="keyword parmname">setup-script</span> - The name of an optional bash script to run
               to install any dependencies prior to run the test. Defaults to <code class="ph codeph">test-setup.sh</code>
               if not supplied.
            </li>
            <li class="li">
               <span class="keyword parmname">prerequisites</span> - Comma separated list of additional DITA-OT
               plugins to install prior to installing the plugin under test.
            </li>
        </ul>
    </div>
</article>
    <article class="topic nested2" aria-labelledby="ariaid-title6" id="travis-ci">
    <h3 class="title text-primary" id="ariaid-title6">Integration with Travis CI</h3>
    
    <div class="body">
        <div class="div row">
            <div class="div">
                <img class="image float-start mt-1 me-3" src="https://www.libtom.net/images/TravisCI-Full-Color-45e242791b7752b745a7ae53f265acd4.png" height="55">
                <p class="p">
                   <dfn class="term">Travis CI</dfn> is a hosted, distributed continuous integration service
                   used to build and test software projects hosted at GitHub. More information
                   about how to set up travis integration can be found on the <a class="xref" href="https://docs.travis-ci.com/" target="_blank" rel="external noopener">travis website</a>.
                </p>
            </div>
        </div>
        <figure class="fig figure w-100 mw-100 p-3">
            
            <img class="image figure-img img-fluid border rounded img-fluid img-thumbnail" src="https://jason-fox.github.io/fox.jason.unit-test/travis.png" alt="">
        <figcaption class="fig figure-caption"><span class="fig--title-label">Figure 7. </span>Travis</figcaption></figure>

        <p class="p">
           For automated testing of DITA-OT plug-ins, place your tests under a <code class="ph codeph">test</code>
           directory under the root of the repository along with the <code class="ph codeph">.travis.yml</code>
           in the root itself.
        </p>
        <p class="p">
           For example to test against DITA-OT 3.1 and DITA-OT 2.5.4, use the following
           <code class="ph codeph">.travis.yml</code>:
        </p>
        <pre class="pre codeblock border rounded language-yml scale-80"><code><span class="ph token key atrule">language</span><span class="ph token punctuation">:</span> java
<span class="ph token key atrule">jdk</span><span class="ph token punctuation">:</span>
    <span class="ph token punctuation">-</span> oraclejdk8
<span class="ph token key atrule">env</span><span class="ph token punctuation">:</span>
    <span class="ph token punctuation">-</span> DITA_OT=3.1
    <span class="ph token punctuation">-</span> DITA_OT=2.5.4
<span class="ph token key atrule">before_script</span><span class="ph token punctuation">:</span>
    <span class="ph token punctuation">-</span> <span class="keyword cmdname">zip</span> <span class="keyword parmname"><span class="ph token punctuation">-</span>r</span> PLUGIN<span class="ph token punctuation">-</span>NAME.zip . <span class="keyword parmname"><span class="ph token punctuation">-</span>x</span> *.zip* *.git/* <span class="ph token important">*temp</span>/* <span class="ph token important">*out</span>/*
    <span class="ph token punctuation">-</span> <span class="keyword cmdname">curl</span> <span class="keyword parmname"><span class="ph token punctuation">-</span>LO</span> https<span class="ph token punctuation">:</span>//github.com/dita<span class="ph token punctuation">-</span>ot/dita<span class="ph token punctuation">-</span>ot/releases/download/$DITA_OT/dita<span class="ph token punctuation">-</span>ot<span class="ph token punctuation">-</span>$DITA_OT.zip
    <span class="ph token punctuation">-</span> <span class="keyword cmdname">unzip</span> <span class="keyword parmname"><span class="ph token punctuation">-</span>q</span> dita<span class="ph token punctuation">-</span>ot<span class="ph token punctuation">-</span>$DITA_OT.zip
    <span class="ph token punctuation">-</span> <span class="keyword cmdname">mv</span> dita<span class="ph token punctuation">-</span>ot*/ dita<span class="ph token punctuation">-</span>ot/
    <span class="ph token punctuation">-</span> <span class="keyword cmdname">chmod</span> <span class="keyword parmname">+x</span> dita<span class="ph token punctuation">-</span>ot/bin/dita
    <span class="ph token punctuation">-</span> <span class="keyword cmdname">dita<span class="ph token punctuation">-</span>ot/bin/dita</span> <span class="keyword parmname">install</span> https<span class="ph token punctuation">:</span>//github.com/jason<span class="ph token punctuation">-</span>fox/fox.jason.unit<span class="ph token punctuation">-</span>test/archive/master.zip
    <span class="ph token punctuation">-</span> <span class="keyword cmdname">dita<span class="ph token punctuation">-</span>ot/bin/dita</span> <span class="keyword parmname">install</span> PLUGIN<span class="ph token punctuation">-</span>NAME.zip
<span class="ph token key atrule">script</span><span class="ph token punctuation">:</span>
    <span class="ph token punctuation">-</span> <span class="keyword cmdname">dita<span class="ph token punctuation">-</span>ot/bin/dita</span> <span class="keyword parmname"><span class="ph token punctuation">-</span><span class="ph token punctuation">-</span>input</span> dita<span class="ph token punctuation">-</span>ot/plugins/PLUGIN<span class="ph token punctuation">-</span>NAME <span class="keyword parmname"><span class="ph token punctuation">-</span><span class="ph token punctuation">-</span>format</span> <span class="keyword option">unit<span class="ph token punctuation">-</span>test</span><span class="keyword parmname"><span class="ph token punctuation">-</span>v</span></code></pre>
        <p class="p">
           This will do the following:
        </p>
        <ul class="ul">
            <li class="li">
               Zip up the files in the plugin under test
            </li>
            <li class="li">
               install the specified DITA-OT version
            </li>
            <li class="li">
               install the unit-testing framework (repeat this for other dependencies)
            </li>
            <li class="li">
               install the plugin under test
            </li>
            <li class="li">
               Run the tests
            </li>
        </ul>
        <p class="p">
           Unit tests will be run whenever a commit occurs.
        </p>
        <p class="p">
           The output will appear within the log as follows:
        </p>
        <pre class="pre codeblock border rounded language-none scale-80"><code>[UNIT002I][INFO] Running tests for 'PLUGIN-NAME'
  [antunit] Build File: /tmp/temp20180420185923919/unit-test/fixtures/PLUGIN-NAME/fixture.xml
  [antunit] Tests run: 3, Failures: 0, Errors: 0, Time elapsed: 31.063 sec
  [antunit] Target: test:    Expect that ...  took 7.202 sec
  [antunit] Target: test:    Expect that ...  took 17.596 sec
...etc

[SUCCESS] All tests have passed
dita2unit-test:
clean-temp:
The command "dita-ot/bin/dita --input dita-ot/plugins/PLUGIN-NAME -f unit-test -v" exited with 0.</code></pre>
    </div>
</article>
    <article class="topic nested2" aria-labelledby="ariaid-title7" id="coveralls">
    <h3 class="title text-primary" id="ariaid-title7">Integration with Coveralls</h3>
    
    <div class="body">
        <div class="div row">
            <div class="div">
                <img class="image float-start mt-1 me-3" src="https://www.libtom.net/images/coveralls-bd6b762f7cf724a89de199133db5868f.png" height="55">
                <p class="p">
                   <dfn class="term">Coveralls</dfn> is a web service to help you track your code coverage
                   over time, and ensure that all your new code is fully covered. More information
                   about how to set up coveralls-travis integration can be found on the <a class="xref" href="https://docs.coveralls.io/" target="_blank" rel="external noopener">travis website</a>.
                </p>
            </div>
        </div>
        <figure class="fig figure w-100 mw-100 p-3">
            
            <img class="image figure-img img-fluid border rounded img-fluid img-thumbnail" src="https://jason-fox.github.io/fox.jason.unit-test/coveralls.png" alt="">
        <figcaption class="fig figure-caption"><span class="fig--title-label">Figure 8. </span>Coveralls</figcaption></figure>

        <p class="p">
           If a plug-in has been instrumented (using the <span class="keyword option">xsl-instrument</span>
           transform) and unit tests are run, a cobertura style <code class="ph codeph">coverage.xml</code>
           file will be created along with the test results and a coverage report. This
           can be forwarded to Coveralls using the standard maven plug-in as shown:
        </p>
        <pre class="pre codeblock border rounded language-yaml scale-80"><code><span class="ph token key atrule">language</span><span class="ph token punctuation">:</span> java
<span class="ph token key atrule">jdk</span><span class="ph token punctuation">:</span>
    <span class="ph token punctuation">-</span> oraclejdk8
<span class="ph token key atrule">env</span><span class="ph token punctuation">:</span>
    <span class="ph token punctuation">-</span> DITA_OT=3.1
    <span class="ph token punctuation">-</span> DITA_OT=2.5.4
<span class="ph token key atrule">before_script</span><span class="ph token punctuation">:</span>
    <span class="ph token punctuation">-</span> <span class="keyword cmdname">zip</span> <span class="keyword parmname"><span class="ph token punctuation">-</span>r</span> PLUGIN<span class="ph token punctuation">-</span>NAME.zip . <span class="keyword parmname"><span class="ph token punctuation">-</span>x</span> *.zip* *.git/* <span class="ph token important">*temp</span>/* <span class="ph token important">*out</span>/*
    <span class="ph token punctuation">-</span> <span class="keyword cmdname">curl</span> <span class="keyword parmname"><span class="ph token punctuation">-</span>LO</span> https<span class="ph token punctuation">:</span>//github.com/dita<span class="ph token punctuation">-</span>ot/dita<span class="ph token punctuation">-</span>ot/releases/download/$DITA_OT/dita<span class="ph token punctuation">-</span>ot<span class="ph token punctuation">-</span>$DITA_OT.zip
    <span class="ph token punctuation">-</span> <span class="keyword cmdname">unzip</span> <span class="keyword parmname"><span class="ph token punctuation">-</span>q</span> dita<span class="ph token punctuation">-</span>ot<span class="ph token punctuation">-</span>$DITA_OT.zip
    <span class="ph token punctuation">-</span> <span class="keyword cmdname">chmod</span> <span class="keyword parmname">+x</span> dita<span class="ph token punctuation">-</span>ot<span class="ph token punctuation">-</span>$DITA_OT/bin/dita
    <span class="ph token punctuation">-</span> <span class="keyword cmdname">dita<span class="ph token punctuation">-</span>ot<span class="ph token punctuation">-</span>$DITA_OT/bin/dita</span> <span class="keyword parmname">install</span> https<span class="ph token punctuation">:</span>//github.com/jason<span class="ph token punctuation">-</span>fox/fox.jason.unit<span class="ph token punctuation">-</span>test/archive/master.zip
    <span class="ph token punctuation">-</span> <span class="keyword cmdname">dita<span class="ph token punctuation">-</span>ot<span class="ph token punctuation">-</span>$DITA_OT/bin/dita</span> <span class="keyword parmname">install</span> PLUGIN<span class="ph token punctuation">-</span>NAME.zip
    <span class="ph token punctuation">-</span> <span class="keyword cmdname">dita<span class="ph token punctuation">-</span>ot<span class="ph token punctuation">-</span>$DITA_OT/bin/dita</span> <span class="keyword parmname"><span class="ph token punctuation">-</span><span class="ph token punctuation">-</span>input</span> dita<span class="ph token punctuation">-</span>ot<span class="ph token punctuation">-</span>$DITA_OT/plugins/PLUGIN<span class="ph token punctuation">-</span>NAME <span class="ph token punctuation">-</span>f <span class="keyword option">xsl<span class="ph token punctuation">-</span>instrument</span>
<span class="ph token key atrule">script</span><span class="ph token punctuation">:</span>
    <span class="ph token punctuation">-</span> <span class="keyword cmdname">dita<span class="ph token punctuation">-</span>ot<span class="ph token punctuation">-</span>$DITA_OT/bin/dita</span> <span class="keyword parmname"><span class="ph token punctuation">-</span><span class="ph token punctuation">-</span>input</span> dita<span class="ph token punctuation">-</span>ot<span class="ph token punctuation">-</span>$DITA_OT/plugins/PLUGIN<span class="ph token punctuation">-</span>NAME <span class="ph token punctuation">-</span>f <span class="keyword option">unit<span class="ph token punctuation">-</span>test</span><span class="keyword parmname"><span class="ph token punctuation">-</span><span class="ph token punctuation">-</span>output</span> . <span class="keyword parmname"><span class="ph token punctuation">-</span>v</span>
<span class="ph token key atrule">after_success</span><span class="ph token punctuation">:</span>
    <span class="ph token punctuation">-</span> <span class="keyword cmdname">cp</span> dita<span class="ph token punctuation">-</span>ot<span class="ph token punctuation">-</span>$DITA_OT/plugins/fox.jason.unit<span class="ph token punctuation">-</span>test/resource/pom.xml pom.xml
    <span class="ph token punctuation">-</span> <span class="keyword cmdname">mvn</span> clean org.eluder.coveralls<span class="ph token punctuation">:</span>coveralls<span class="ph token punctuation">-</span>maven<span class="ph token punctuation">-</span>plugin<span class="ph token punctuation">:</span>report</code></pre>
    </div>
</article>
</article>
    <article class="topic nested1" aria-labelledby="ariaid-title8" id="file-structure">
    <h2 class="title text-primary" id="ariaid-title8">Unit Test File Structure</h2>
    <div class="body">
        <p class="p">
           The unit tests are organized in the following manner:
        </p>
        <pre class="pre codeblock border rounded language-none scale-80"><code>├── test-suite-A
│   └── test
│       ├── unit-test-1
│       ├── unit-test-2
│       ├── ... etc
│       ├── bootstrap.xml
│       └── coverage.xml
│
├── test-suite-B
│   └── test
│       ├── unit-test-1
│       ├── unit-test-2
│       ├── ... etc
│       ├── bootstrap.xml
│       └── coverage.xml</code></pre>
        <p class="p">
           Each suite of tests (identified by a directory called <span class="ph filepath">test</span>)
           can be found in a separate directory. Each test within the suite can be found
           in a separate sub-directory. A <code class="ph codeph">coverage.xml</code> file should be
           added to each test suite to enable the framework to calculate coverage.
        </p>
        <p class="p">
           This structure means that an integration test of multiple plug-ins can be run by
           adding a <span class="ph filepath">test</span> directory to each plug-in and invoking the
           tests as shown:
        </p>
        <pre class="pre codeblock border rounded language-bash scale-80"><code><span class="keyword cmdname">dita</span> <span class="keyword parmname">--format</span> <span class="keyword option">unit-test</span> <span class="ph token punctuation">\</span>
     <span class="keyword parmname">--input</span> ./plugins</code></pre>
    </div>
    <article class="topic nested2" aria-labelledby="ariaid-title9" id="test-suite-files">
    <h3 class="title text-primary" id="ariaid-title9">Test suite files</h3>
    <div class="body">
        <section class="section" id="test-suite-files__bootstrap.xml-file"><h4 class="title h4 text-secondary"><code class="ph codeph">bootstrap.xml</code> file
            </h4>
           
            <p class="p">
               At the root of the tests lies a <code class="ph codeph">bootstrap.xml</code> file which
               references the <code class="ph codeph">antlib.xml</code> library as shown:
            </p>
            <pre class="pre codeblock border rounded language-xml scale-80"><code><span class="ph token tag"><span class="ph token tag"><span class="ph token punctuation">&lt;</span>project</span> <span class="ph token attr-name">name</span><span class="ph token attr-value"><span class="ph token punctuation attr-equals">=</span><span class="ph token punctuation">"</span>bootstrap.unit-test<span class="ph token punctuation">"</span></span><span class="ph token punctuation">&gt;</span></span>
  <span class="ph token tag"><span class="ph token tag"><span class="ph token punctuation">&lt;</span>dirname</span> <span class="ph token attr-name">property</span><span class="ph token attr-value"><span class="ph token punctuation attr-equals">=</span><span class="ph token punctuation">"</span>test.root.dir<span class="ph token punctuation">"</span></span> <span class="ph token attr-name">file</span><span class="ph token attr-value"><span class="ph token punctuation attr-equals">=</span><span class="ph token punctuation">"</span>${ant.file.bootstrap.unit-test}/..<span class="ph token punctuation">"</span></span> <span class="ph token punctuation">/&gt;</span></span>
  <span class="ph token tag"><span class="ph token tag"><span class="ph token punctuation">&lt;</span>property</span> <span class="ph token attr-name">name</span><span class="ph token attr-value"><span class="ph token punctuation attr-equals">=</span><span class="ph token punctuation">"</span>dita.dir<span class="ph token punctuation">"</span></span> <span class="ph token attr-name">location</span><span class="ph token attr-value"><span class="ph token punctuation attr-equals">=</span><span class="ph token punctuation">"</span>PATH_TO_DITA_OT<span class="ph token punctuation">"</span></span><span class="ph token punctuation">/&gt;</span></span>
  <span class="ph token tag"><span class="ph token tag"><span class="ph token punctuation">&lt;</span>typedef</span> <span class="ph token attr-name">file</span><span class="ph token attr-value"><span class="ph token punctuation attr-equals">=</span><span class="ph token punctuation">"</span>${dita.dir}/plugins/fox.jason.unit-test/resource/antlib.xml<span class="ph token punctuation">"</span></span><span class="ph token punctuation">/&gt;</span></span>
<span class="ph token tag"><span class="ph token tag"><span class="ph token punctuation">&lt;/</span>project</span><span class="ph token punctuation">&gt;</span></span></code></pre>
            <ul class="ul">
                <li class="li">
                   The location of <span class="keyword parmname">test.root.dir</span> must be set - this allows the
                   expectation of a single test to be updated directly from the command line
                   independently of the test harness.
                </li>
                <li class="li">
                   The location of <span class="keyword parmname">dita.dir</span> must be set - this allows a single
                   test to be run directly from the command line independently of the test harness.
                </li>
                <li class="li">
                   The functions from the unit-test <code class="ph codeph">antlib.xml</code> must be loaded
                   using the <code class="keyword markupname xmlelement">&lt;typedef&gt;</code> task.
                </li>
            </ul>
        </section>
        <section class="section" id="test-suite-files__coverage.xml-file"><h4 class="title h4 text-secondary"><code class="ph codeph">coverage.xml</code> file
            </h4>
           
            <p class="p">
               A token coverage file consists of a list of XML elements or string literals
               which should be present in a test-suite’s outputs. For example, PDF tests
               should cover all possible fop element and attributes.
            </p>
            <pre class="pre codeblock border rounded language-xml scale-80"><code><span class="ph token tag"><span class="ph token tag"><span class="ph token punctuation">&lt;</span>package</span> <span class="ph token attr-name">name</span><span class="ph token attr-value"><span class="ph token punctuation attr-equals">=</span><span class="ph token punctuation">"</span>org.dita.pdf2<span class="ph token punctuation">"</span></span><span class="ph token punctuation">&gt;</span></span>
  <span class="ph token tag"><span class="ph token tag"><span class="ph token punctuation">&lt;</span>lines</span><span class="ph token punctuation">&gt;</span></span>
    <span class="ph token tag"><span class="ph token tag"><span class="ph token punctuation">&lt;</span>line</span> <span class="ph token attr-name">id</span><span class="ph token attr-value"><span class="ph token punctuation attr-equals">=</span><span class="ph token punctuation">"</span>plain-text<span class="ph token punctuation">"</span></span><span class="ph token punctuation">&gt;</span></span>font-family="STANDARD"<span class="ph token tag"><span class="ph token tag"><span class="ph token punctuation">&lt;/</span>line</span><span class="ph token punctuation">&gt;</span></span>
    <span class="ph token tag"><span class="ph token tag"><span class="ph token punctuation">&lt;</span>line</span> <span class="ph token attr-name">id</span><span class="ph token attr-value"><span class="ph token punctuation attr-equals">=</span><span class="ph token punctuation">"</span>monospace-text<span class="ph token punctuation">"</span></span><span class="ph token punctuation">&gt;</span></span>font-family="MONOSPACE"<span class="ph token tag"><span class="ph token tag"><span class="ph token punctuation">&lt;/</span>line</span><span class="ph token punctuation">&gt;</span></span>
  <span class="ph token tag"><span class="ph token tag"><span class="ph token punctuation">&lt;/</span>lines</span><span class="ph token punctuation">&gt;</span></span>
  <span class="ph token tag"><span class="ph token tag"><span class="ph token punctuation">&lt;</span>elements</span><span class="ph token punctuation">&gt;</span></span>
    <span class="ph token tag"><span class="ph token tag"><span class="ph token punctuation">&lt;</span>element</span> <span class="ph token attr-name">id</span><span class="ph token attr-value"><span class="ph token punctuation attr-equals">=</span><span class="ph token punctuation">"</span>codeblock<span class="ph token punctuation">"</span></span><span class="ph token punctuation">&gt;</span></span>fo:block font-family="MONOSPACE"<span class="ph token tag"><span class="ph token tag"><span class="ph token punctuation">&lt;/</span>element</span><span class="ph token punctuation">&gt;</span></span>
    <span class="ph token tag"><span class="ph token tag"><span class="ph token punctuation">&lt;</span>element</span> <span class="ph token attr-name">id</span><span class="ph token attr-value"><span class="ph token punctuation attr-equals">=</span><span class="ph token punctuation">"</span>codeph-tt<span class="ph token punctuation">"</span></span><span class="ph token punctuation">&gt;</span></span>fo:inline font-family="MONOSPACE"<span class="ph token tag"><span class="ph token tag"><span class="ph token punctuation">&lt;/</span>element</span><span class="ph token punctuation">&gt;</span></span>
    <span class="ph token tag"><span class="ph token tag"><span class="ph token punctuation">&lt;</span>element</span> <span class="ph token attr-name">id</span><span class="ph token attr-value"><span class="ph token punctuation attr-equals">=</span><span class="ph token punctuation">"</span>colspec<span class="ph token punctuation">"</span></span><span class="ph token punctuation">&gt;</span></span>fo:table-column<span class="ph token tag"><span class="ph token tag"><span class="ph token punctuation">&lt;/</span>element</span><span class="ph token punctuation">&gt;</span></span>
    <span class="ph token tag"><span class="ph token tag"><span class="ph token punctuation">&lt;</span>element</span> <span class="ph token attr-name">id</span><span class="ph token attr-value"><span class="ph token punctuation attr-equals">=</span><span class="ph token punctuation">"</span>colspec-width<span class="ph token punctuation">"</span></span><span class="ph token punctuation">&gt;</span></span>fo:table-column column-width<span class="ph token tag"><span class="ph token tag"><span class="ph token punctuation">&lt;/</span>element</span><span class="ph token punctuation">&gt;</span></span>
  <span class="ph token tag"><span class="ph token tag"><span class="ph token punctuation">&lt;/</span>elements</span><span class="ph token punctuation">&gt;</span></span>
<span class="ph token tag"><span class="ph token tag"><span class="ph token punctuation">&lt;/</span>package</span><span class="ph token punctuation">&gt;</span></span></code></pre>
        </section>
        <section class="section" id="test-suite-files__template-coverage.xml-file"><h4 class="title h4 text-secondary"><code class="ph codeph">template-coverage.xml</code> file
            </h4>
           
            <p class="p">
               An XSL coverage file consists of a list of XSL elements which are present within
               a plug-in. This file is generated by the <span class="keyword option">xsl-instrument</span> transform.
            </p>
            <pre class="pre codeblock border rounded language-xml scale-80"><code><span class="ph token tag"><span class="ph token tag"><span class="ph token punctuation">&lt;</span>package</span> <span class="ph token attr-name">name</span><span class="ph token attr-value"><span class="ph token punctuation attr-equals">=</span><span class="ph token punctuation">"</span>fox.jason.unit-test<span class="ph token punctuation">"</span></span><span class="ph token punctuation">&gt;</span></span>
  <span class="ph token tag"><span class="ph token tag"><span class="ph token punctuation">&lt;</span>classes</span><span class="ph token punctuation">&gt;</span></span>
    <span class="ph token tag"><span class="ph token tag"><span class="ph token punctuation">&lt;</span>class</span> <span class="ph token attr-name">name</span><span class="ph token attr-value"><span class="ph token punctuation attr-equals">=</span><span class="ph token punctuation">"</span>xsl/order<span class="ph token punctuation">"</span></span> <span class="ph token attr-name">filename</span><span class="ph token attr-value"><span class="ph token punctuation attr-equals">=</span><span class="ph token punctuation">"</span>xsl/order.xsl<span class="ph token punctuation">"</span></span><span class="ph token punctuation">&gt;</span></span>
      <span class="ph token tag"><span class="ph token tag"><span class="ph token punctuation">&lt;</span>lines</span><span class="ph token punctuation">&gt;</span></span>
        <span class="ph token tag"><span class="ph token tag"><span class="ph token punctuation">&lt;</span>line</span> <span class="ph token attr-name">id</span><span class="ph token attr-value"><span class="ph token punctuation attr-equals">=</span><span class="ph token punctuation">"</span>d6e3:xsl/order.xsl<span class="ph token punctuation">"</span></span>
              <span class="ph token attr-name">element</span><span class="ph token attr-value"><span class="ph token punctuation attr-equals">=</span><span class="ph token punctuation">"</span>xsl:template<span class="ph token punctuation">"</span></span>
              <span class="ph token attr-name">open</span><span class="ph token attr-value"><span class="ph token punctuation attr-equals">=</span><span class="ph token punctuation">"</span>true<span class="ph token punctuation">"</span></span>
              <span class="ph token attr-name">indent</span><span class="ph token attr-value"><span class="ph token punctuation attr-equals">=</span><span class="ph token punctuation">"</span>1<span class="ph token punctuation">"</span></span>
              <span class="ph token attr-name">branch</span><span class="ph token attr-value"><span class="ph token punctuation attr-equals">=</span><span class="ph token punctuation">"</span>false<span class="ph token punctuation">"</span></span>
              <span class="ph token attr-name">attributes</span><span class="ph token attr-value"><span class="ph token punctuation attr-equals">=</span><span class="ph token punctuation">"</span>match=<span class="ph token entity named-entity">&amp;amp;</span>#34;/<span class="ph token entity named-entity">&amp;amp;</span>#34;<span class="ph token punctuation">"</span></span>
              <span class="ph token attr-name">number</span><span class="ph token attr-value"><span class="ph token punctuation attr-equals">=</span><span class="ph token punctuation">"</span>13<span class="ph token punctuation">"</span></span><span class="ph token punctuation">&gt;</span></span>d6e3:xsl/order.xsl<span class="ph token tag"><span class="ph token tag"><span class="ph token punctuation">&lt;/</span>line</span><span class="ph token punctuation">&gt;</span></span>
        <span class="ph token tag"><span class="ph token tag"><span class="ph token punctuation">&lt;</span>line</span> <span class="ph token attr-name">id</span><span class="ph token attr-value"><span class="ph token punctuation attr-equals">=</span><span class="ph token punctuation">"</span>d6e3:xsl/order.xsl<span class="ph token punctuation">"</span></span>
              <span class="ph token attr-name">element</span><span class="ph token attr-value"><span class="ph token punctuation attr-equals">=</span><span class="ph token punctuation">"</span>xsl:apply-templates<span class="ph token punctuation">"</span></span>
              <span class="ph token attr-name">open</span><span class="ph token attr-value"><span class="ph token punctuation attr-equals">=</span><span class="ph token punctuation">"</span>true<span class="ph token punctuation">"</span></span>
              <span class="ph token attr-name">indent</span><span class="ph token attr-value"><span class="ph token punctuation attr-equals">=</span><span class="ph token punctuation">"</span>2<span class="ph token punctuation">"</span></span>
              <span class="ph token attr-name">branch</span><span class="ph token attr-value"><span class="ph token punctuation attr-equals">=</span><span class="ph token punctuation">"</span>false<span class="ph token punctuation">"</span></span>
              <span class="ph token attr-name">attributes</span><span class="ph token attr-value"><span class="ph token punctuation attr-equals">=</span><span class="ph token punctuation">"</span>select=<span class="ph token entity named-entity">&amp;amp;</span>#34;//failed-assert<span class="ph token entity named-entity">&amp;amp;</span>#34;<span class="ph token punctuation">"</span></span>
              <span class="ph token attr-name">number</span><span class="ph token attr-value"><span class="ph token punctuation attr-equals">=</span><span class="ph token punctuation">"</span>19<span class="ph token punctuation">"</span></span><span class="ph token punctuation">/&gt;</span></span></code></pre>
        </section>
        <section class="section" id="test-suite-files__disabled.txt-file"><h4 class="title h4 text-secondary"><code class="ph codeph">disabled.txt</code> file
            </h4>
           
            <p class="p">
               If a <code class="ph codeph">disabled.txt</code> file is present within a test suite
               directory, none of the tests within the directory will be run.
            </p>
        </section>
        <section class="section" id="test-suite-files__overrides-for-attributes.xml-colors.xml-and-fonts.xml"><h4 class="title h4 text-secondary">Overrides for
           <code class="ph codeph">attributes.xml</code>, <code class="ph codeph">colors.xml</code> and <code class="ph codeph">fonts.xml</code>
            </h4>
           
            <p class="p">
               The <code class="ph codeph">cfg</code> directory of the plug-in holds standard lists of fonts,
               colors and attributes to replace when running PDF tests - this can be
               overridden by individuals test or test suites if necessary by placing an
               equivalent override file in the test directory or test-suite directory.
            </p>
        </section>
        <section class="section" id="test-suite-files__overrides-for-test.properties"><h4 class="title h4 text-secondary">Overrides for <code class="ph codeph">test.properties</code>
            </h4>
           
            <p class="p">
               Additional test properties can be passed to DITA-OT when each test is run if a
               <code class="ph codeph">test.properties</code> file is present in the test directory or
               test-suite directory. The name of the file to search for can also be altered.
               See <a class="xref" href="http://www.dita-ot.org/3.0/topics/using-dita-properties-file.html" target="_blank" rel="external noopener">Setting build parameters with <code class="ph codeph">.properties</code>
               files</a> for more details.
            </p>
        </section>
    </div>
</article>
    <article class="topic nested2" aria-labelledby="ariaid-title10" id="test-files">
    <h3 class="title text-primary" id="ariaid-title10">Individual test files</h3>
    <div class="body">
        <p class="p">
           Each unit test is organized in the following manner:
        </p>
        <pre class="pre codeblock border rounded language-none scale-80"><code>├── build.xml
├── document.ditamap
├── expected.html
├── test.properties (optional)
└── topics
    └── *.dita files</code></pre>
        <ul class="ul">
            <li class="li">
               An ANT <span class="ph filepath">build.xml</span> file to invoke the test
            </li>
            <li class="li">
               A <span class="ph filepath">document.ditamap</span> referring to the individual
               <code class="ph codeph">*.dita</code> files
            </li>
            <li class="li">
               An optional <span class="ph filepath">test.properties</span> file if passing any additional
               properties to DITA-OT
            </li>
            <li class="li">
               A test expectation (usually called <span class="ph filepath">expected.html</span> or
               <span class="ph filepath">expected.fo</span>)
            </li>
            <li class="li">
               Any further <span class="ph filepath">*.dita</span> files or source files, graphics etc.
               required for the test.
            </li>
        </ul>
        <p class="p">
           The <span class="ph filepath">build.xml</span> must consist of a single default target, and <code class="ph codeph">import</code>
           the <span class="ph filepath">bootstrap.xml</span> file as shown. The <code class="ph codeph">description</code>
           is used within the test report.
        </p>
        <pre class="pre codeblock border rounded language-xml scale-80"><code><span class="ph token tag"><span class="ph token tag"><span class="ph token punctuation">&lt;</span>project</span> <span class="ph token attr-name">basedir</span><span class="ph token attr-value"><span class="ph token punctuation attr-equals">=</span><span class="ph token punctuation">"</span>.<span class="ph token punctuation">"</span></span> <span class="ph token attr-name">default</span><span class="ph token attr-value"><span class="ph token punctuation attr-equals">=</span><span class="ph token punctuation">"</span>unit-test<span class="ph token punctuation">"</span></span><span class="ph token punctuation">&gt;</span></span>
  <span class="ph token tag"><span class="ph token tag"><span class="ph token punctuation">&lt;</span>import</span> <span class="ph token attr-name">file</span><span class="ph token attr-value"><span class="ph token punctuation attr-equals">=</span><span class="ph token punctuation">"</span>../../bootstrap.xml<span class="ph token punctuation">"</span></span><span class="ph token punctuation">/&gt;</span></span>
  <span class="ph token tag"><span class="ph token tag"><span class="ph token punctuation">&lt;</span>description</span><span class="ph token punctuation">&gt;</span></span>
    Body text should be displayed in the standard font
  <span class="ph token tag"><span class="ph token tag"><span class="ph token punctuation">&lt;/</span>description</span><span class="ph token punctuation">&gt;</span></span>
  <span class="ph token tag"><span class="ph token tag"><span class="ph token punctuation">&lt;</span>target</span> <span class="ph token attr-name">name</span><span class="ph token attr-value"><span class="ph token punctuation attr-equals">=</span><span class="ph token punctuation">"</span>unit-test<span class="ph token punctuation">"</span></span><span class="ph token punctuation">&gt;</span></span>
      <span class="ph token tag"><span class="ph token tag"><span class="ph token punctuation">&lt;</span>exec-html5</span><span class="ph token punctuation">/&gt;</span></span>
      <span class="ph token tag"><span class="ph token tag"><span class="ph token punctuation">&lt;</span>get-html-article</span> <span class="ph token attr-name">from</span><span class="ph token attr-value"><span class="ph token punctuation attr-equals">=</span><span class="ph token punctuation">"</span>topics/body-text.html<span class="ph token punctuation">"</span></span><span class="ph token punctuation">/&gt;</span></span>
      <span class="ph token tag"><span class="ph token tag"><span class="ph token punctuation">&lt;</span>compare-output</span> <span class="ph token attr-name">suffix</span><span class="ph token attr-value"><span class="ph token punctuation attr-equals">=</span><span class="ph token punctuation">"</span>.html<span class="ph token punctuation">"</span></span><span class="ph token punctuation">/&gt;</span></span>
  <span class="ph token tag"><span class="ph token tag"><span class="ph token punctuation">&lt;/</span>target</span><span class="ph token punctuation">&gt;</span></span>
<span class="ph token tag"><span class="ph token tag"><span class="ph token punctuation">&lt;/</span>project</span><span class="ph token punctuation">&gt;</span></span></code></pre>
        <ul class="ul">
            <li class="li">
               An individual test can be run directly from the command line by running the
               default target.
            </li>
            <li class="li">
               Adding the comment <code class="ph codeph">&lt;!-- @disabled --&gt;</code> within the <code class="ph codeph">build.xml</code>
               file will disable a test
            </li>
        </ul>
    </div>
</article>
</article>
    <article class="topic nested1" aria-labelledby="ariaid-title11" id="api">
    <h2 class="title text-primary" id="ariaid-title11">Unit Testing ANT Tasks</h2>
    
    <div class="body">
        <p class="p">
           The following ANT tasks are available from the DITA-OT Unit Test Framework:
        </p>
        <section class="section" id="api__compare-output"><h3 class="title h4 text-secondary">Compare-Output</h3>
            
            <p class="p">
               Fail the test if the test output file does not match the expectation file.
            </p>
            <div><table class="table"><colgroup><col style="width:9%"><col style="width:63%"><col style="width:27%"></colgroup><thead class="thead">
                        <tr>
                            <th class="entry align-left" id="api__compare-output__entry__1">Attribute</th>
                            <th class="entry align-left" id="api__compare-output__entry__2">Description</th>
                            <th class="entry align-left" id="api__compare-output__entry__3">Required</th>
                        </tr>
                    </thead><tbody class="tbody">
                        <tr>
                            <td class="entry align-left" headers="api__compare-output__entry__1">expectation</td>
                            <td class="entry align-left" headers="api__compare-output__entry__2">Location of the file that the output should match</td>
                               <td class="entry align-left" headers="api__compare-output__entry__3">No; defaults to <code class="ph codeph">expected.fo</code>
                            </td>
                        </tr>
                        <tr>
                            <td class="entry align-left" headers="api__compare-output__entry__1">os</td>
                            <td class="entry align-left" headers="api__compare-output__entry__2">Only make the comparison if the current operating system is of a given type</td>
                               <td class="entry align-left" headers="api__compare-output__entry__3">No; defaults to <code class="ph codeph">any</code>
                            </td>
                        </tr>
                        <tr>
                            <td class="entry align-left" headers="api__compare-output__entry__1">result</td>
                            <td class="entry align-left" headers="api__compare-output__entry__2">Location of the file output by the test</td>
                               <td class="entry align-left" headers="api__compare-output__entry__3">No; defaults to <code class="ph codeph">out/fragment.fo</code>
                            </td>
                        </tr>
                        <tr>
                            <td class="entry align-left" headers="api__compare-output__entry__1">suffix</td>
                            <td class="entry align-left" headers="api__compare-output__entry__2">File suffix used by the test expectation</td>
                               <td class="entry align-left" headers="api__compare-output__entry__3">No; defaults to <code class="ph codeph">.fo</code>
                            </td>
                        </tr>
                    </tbody></table></div>
            <pre class="pre codeblock border rounded language-xml scale-80"><code><span class="ph token tag"><span class="ph token tag"><span class="ph token punctuation">&lt;</span>compare-output</span><span class="ph token punctuation">/&gt;</span></span></code></pre>
            <p class="p">
               compares the file <code class="ph codeph">out/fragment.fo</code> with <code class="ph codeph">expected.fo</code>
               and fails if they do not match.
            </p>
            <pre class="pre codeblock border rounded language-xml scale-80"><code><span class="ph token tag"><span class="ph token tag"><span class="ph token punctuation">&lt;</span>compare-output</span> <span class="ph token attr-name">suffix</span><span class="ph token attr-value"><span class="ph token punctuation attr-equals">=</span><span class="ph token punctuation">"</span>.html<span class="ph token punctuation">"</span></span><span class="ph token punctuation">/&gt;</span></span></code></pre>
            <p class="p">
               compares the file <code class="ph codeph">out/fragment.html</code> with <code class="ph codeph">expected.html</code>
               and fails if they do not match.
            </p>
            <pre class="pre codeblock border rounded language-xml scale-80"><code><span class="ph token tag"><span class="ph token tag"><span class="ph token punctuation">&lt;</span>compare-output</span> <span class="ph token attr-name">suffix</span><span class="ph token attr-value"><span class="ph token punctuation attr-equals">=</span><span class="ph token punctuation">"</span>.svrl<span class="ph token punctuation">"</span></span> <span class="ph token attr-name">expectation</span><span class="ph token attr-value"><span class="ph token punctuation attr-equals">=</span><span class="ph token punctuation">"</span>expected.svrl.win<span class="ph token punctuation">"</span></span> <span class="ph token attr-name">os</span><span class="ph token attr-value"><span class="ph token punctuation attr-equals">=</span><span class="ph token punctuation">"</span>windows<span class="ph token punctuation">"</span></span><span class="ph token punctuation">/&gt;</span></span></code></pre>
            <p class="p">
               if running on a Windows system, compares the file <code class="ph codeph">out/fragment.svrl</code>
               with <code class="ph codeph">expected.svrl.win</code> and fails if they do not match.
            </p>
            <p class="p">
               if running on a UNIX system, no comparison is made.
            </p>
        </section>
        <section class="section" id="api__contains-text"><h3 class="title h4 text-secondary">Contains-Text</h3>
            
            <p class="p">
               Fail the test if the log from the test does not contain the given string.
            </p>
            <div><table class="table"><colgroup><col style="width:7%"><col style="width:63%"><col style="width:29%"></colgroup><thead class="thead">
                        <tr>
                            <th class="entry align-left" id="api__contains-text__entry__1">Attribute</th>
                            <th class="entry align-left" id="api__contains-text__entry__2">Description</th>
                            <th class="entry align-left" id="api__contains-text__entry__3">Required</th>
                        </tr>
                    </thead><tbody class="tbody">
                        <tr>
                            <td class="entry align-left" headers="api__contains-text__entry__1">actual</td>
                            <td class="entry align-left" headers="api__contains-text__entry__2">The text actually output by the test</td>
                            <td class="entry align-left" headers="api__contains-text__entry__3">No; defaults to output from DITA-OT</td>
                        </tr>
                        <tr>
                            <td class="entry align-left" headers="api__contains-text__entry__1">expected</td>
                            <td class="entry align-left" headers="api__contains-text__entry__2">The expected fragment of text</td>
                            <td class="entry align-left" headers="api__contains-text__entry__3">Yes</td>
                        </tr>
                        <tr>
                            <td class="entry align-left" headers="api__contains-text__entry__1">os</td>
                            <td class="entry align-left" headers="api__contains-text__entry__2">Only make the comparison if the current operating system is of a given type</td>
                               <td class="entry align-left" headers="api__contains-text__entry__3">No; defaults to <code class="ph codeph">any</code>
                            </td>
                        </tr>
                    </tbody></table></div>
            <pre class="pre codeblock border rounded language-xml scale-80"><code><span class="ph token tag"><span class="ph token tag"><span class="ph token punctuation">&lt;</span>contains-text</span> <span class="ph token attr-name">expected</span><span class="ph token attr-value"><span class="ph token punctuation attr-equals">=</span><span class="ph token punctuation">"</span>Lorem Ipsum<span class="ph token punctuation">"</span></span><span class="ph token punctuation">/&gt;</span></span></code></pre>
            <p class="p">
               compares the output of DITA-OT and fails if the text "Lorem Ipsum" cannot be found.
            </p>
            <pre class="pre codeblock border rounded language-xml scale-80"><code><span class="ph token tag"><span class="ph token tag"><span class="ph token punctuation">&lt;</span>contains-text</span> <span class="ph token attr-name">expected</span><span class="ph token attr-value"><span class="ph token punctuation attr-equals">=</span><span class="ph token punctuation">"</span>This is running on Windows<span class="ph token punctuation">"</span></span> <span class="ph token attr-name">os</span><span class="ph token attr-value"><span class="ph token punctuation attr-equals">=</span><span class="ph token punctuation">"</span>windows<span class="ph token punctuation">"</span></span><span class="ph token punctuation">/&gt;</span></span></code></pre>
            <p class="p">
               if running on a Windows system, compares the output of DITA-OT and fails if the
               text "This is running on Windows" cannot be found.
            </p>
            <p class="p">
               if running on a UNIX system, no comparison is made.
            </p>
        </section>
        <section class="section" id="api__exec-html5"><h3 class="title h4 text-secondary">Exec-HTML5</h3>
            
            <p class="p">
               Execute the HTML5 DITA-OT transform in verbose mode The test will fail if the
               result was not as expected or took too long.
            </p>
            <div><table class="table"><colgroup><col style="width:7%"><col style="width:46%"><col style="width:47%"></colgroup><thead class="thead">
                        <tr>
                            <th class="entry align-left" id="api__exec-html5__entry__1">Attribute</th>
                            <th class="entry align-left" id="api__exec-html5__entry__2">Description</th>
                            <th class="entry align-left" id="api__exec-html5__entry__3">Required</th>
                        </tr>
                    </thead><tbody class="tbody">
                        <tr>
                            <td class="entry align-left" headers="api__exec-html5__entry__1">ditamap</td>
                               <td class="entry align-left" headers="api__exec-html5__entry__2">The DITA <code class="keyword markupname xmlelement">&lt;map&gt;</code> file
                               specifying which topics and other resources to use to create a document
                            </td>
                               <td class="entry align-left" headers="api__exec-html5__entry__3">No; defaults to <span class="ph filepath">document.ditamap</span>
                            </td>
                        </tr>
                        <tr>
                            <td class="entry align-left" headers="api__exec-html5__entry__1">expectedresult</td>
                            <td class="entry align-left" headers="api__exec-html5__entry__2">The expected result when invoking the transform</td>
                               <td class="entry align-left" headers="api__exec-html5__entry__3">No; defaults to <code class="ph codeph">0</code> = success
                            </td>
                        </tr>
                        <tr>
                            <td class="entry align-left" headers="api__exec-html5__entry__1">maxwait</td>
                            <td class="entry align-left" headers="api__exec-html5__entry__2">The maximum time to create a document</td>
                            <td class="entry align-left" headers="api__exec-html5__entry__3">No; defaults to 100 seconds</td>
                        </tr>
                        <tr>
                            <td class="entry align-left" headers="api__exec-html5__entry__1">propertyfile</td>
                            <td class="entry align-left" headers="api__exec-html5__entry__2">The name of a file holding additional properties</td>
                               <td class="entry align-left" headers="api__exec-html5__entry__3">No; defaults to <span class="ph filepath">test.properties</span>
                            </td>
                        </tr>
                        <tr>
                            <td class="entry align-left" headers="api__exec-html5__entry__1">transtype</td>
                            <td class="entry align-left" headers="api__exec-html5__entry__2">The transtype to invoke when creating the document</td>
                               <td class="entry align-left" headers="api__exec-html5__entry__3">No; this can be <code class="ph codeph">html5</code> or
                               any DITA-OT transform that extends <code class="ph codeph">base-html</code>; defaults to <code class="ph codeph">html5</code>
                            </td>
                        </tr>
                    </tbody></table></div>
            <pre class="pre codeblock border rounded language-xml scale-80"><code><span class="ph token tag"><span class="ph token tag"><span class="ph token punctuation">&lt;</span>exec-html5</span> <span class="ph token attr-name">transtype</span><span class="ph token attr-value"><span class="ph token punctuation attr-equals">=</span><span class="ph token punctuation">"</span>custom-html<span class="ph token punctuation">"</span></span><span class="ph token punctuation">/&gt;</span></span></code></pre>
            <p class="p">
               runs DITA-OT using the <code class="ph codeph">custom-html</code> HTML transtype. the output
               will be placed in the <code class="ph codeph">/out/html</code> directory.
            </p>
        </section>
        <section class="section" id="api__exec-pdf"><h3 class="title h4 text-secondary">Exec-PDF</h3>
            
            <p class="p">
               Execute the PDF DITA-OT transform in verbose mode.
            </p>
            <div><table class="table"><colgroup><col style="width:7%"><col style="width:47%"><col style="width:45%"></colgroup><thead class="thead">
                        <tr>
                            <th class="entry align-left" id="api__exec-pdf__entry__1">Attribute</th>
                            <th class="entry align-left" id="api__exec-pdf__entry__2">Description</th>
                            <th class="entry align-left" id="api__exec-pdf__entry__3">Required</th>
                        </tr>
                    </thead><tbody class="tbody">
                        <tr>
                            <td class="entry align-left" headers="api__exec-pdf__entry__1">ditamap</td>
                               <td class="entry align-left" headers="api__exec-pdf__entry__2">The DITA <code class="keyword markupname xmlelement">&lt;map&gt;</code> file
                               specifying which topics and other resources to use to create a document
                            </td>
                               <td class="entry align-left" headers="api__exec-pdf__entry__3">No; defaults to <span class="ph filepath">document.ditamap</span>
                            </td>
                        </tr>
                        <tr>
                            <td class="entry align-left" headers="api__exec-pdf__entry__1">expectedresult</td>
                            <td class="entry align-left" headers="api__exec-pdf__entry__2">The expected result when invoking the transform</td>
                               <td class="entry align-left" headers="api__exec-pdf__entry__3">No; defaults to <code class="ph codeph">0</code> = success
                            </td>
                        </tr>
                        <tr>
                            <td class="entry align-left" headers="api__exec-pdf__entry__1">maxwait</td>
                            <td class="entry align-left" headers="api__exec-pdf__entry__2">The maximum time to create a document</td>
                            <td class="entry align-left" headers="api__exec-pdf__entry__3">No; defaults to 100 seconds</td>
                        </tr>
                        <tr>
                            <td class="entry align-left" headers="api__exec-pdf__entry__1">propertyfile</td>
                            <td class="entry align-left" headers="api__exec-pdf__entry__2">The name of a file holding additional properties</td>
                               <td class="entry align-left" headers="api__exec-pdf__entry__3">No; defaults to <span class="ph filepath">test.properties</span>
                            </td>
                        </tr>
                        <tr>
                            <td class="entry align-left" headers="api__exec-pdf__entry__1">transtype</td>
                            <td class="entry align-left" headers="api__exec-pdf__entry__2">The transtype to invoke when creating the document</td>
                               <td class="entry align-left" headers="api__exec-pdf__entry__3">No; this can be <code class="ph codeph">pdf2</code> or any
                               DITA-OT transform that extends <code class="ph codeph">pdf2</code>; defaults to <code class="ph codeph">pdf2</code>
                            </td>
                        </tr>
                    </tbody></table></div>
            <pre class="pre codeblock border rounded language-xml scale-80"><code><span class="ph token tag"><span class="ph token tag"><span class="ph token punctuation">&lt;</span>exec-pdf</span> <span class="ph token attr-name">transtype</span><span class="ph token attr-value"><span class="ph token punctuation attr-equals">=</span><span class="ph token punctuation">"</span>custom-pdf<span class="ph token punctuation">"</span></span><span class="ph token punctuation">/&gt;</span></span></code></pre>
            <p class="p">
               runs DITA-OT using the <code class="ph codeph">custom-pdf</code> PDF transtype. <code class="ph codeph">topic.fo</code>
               and <code class="ph codeph">document.pdf</code> will be placed in the <code class="ph codeph">/out</code>
               directory.
            </p>
        </section>
        <section class="section" id="api__exec-svrl"><h3 class="title h4 text-secondary">Exec-SVRL</h3>
            
            <p class="p">
               Execute the HERE Validator SVRL DITA-OT transform in verbose mode. The test will
               fail if the result was not as expected or took too long.
            </p>
            <div><table class="table"><colgroup><col style="width:7%"><col style="width:47%"><col style="width:45%"></colgroup><thead class="thead">
                        <tr>
                            <th class="entry align-left" id="api__exec-svrl__entry__1">Attribute</th>
                            <th class="entry align-left" id="api__exec-svrl__entry__2">Description</th>
                            <th class="entry align-left" id="api__exec-svrl__entry__3">Required</th>
                        </tr>
                    </thead><tbody class="tbody">
                        <tr>
                            <td class="entry align-left" headers="api__exec-svrl__entry__1">ditamap</td>
                               <td class="entry align-left" headers="api__exec-svrl__entry__2">The DITA <code class="keyword markupname xmlelement">&lt;map&gt;</code> file
                               specifying which topics and other resources to use to create a document
                            </td>
                               <td class="entry align-left" headers="api__exec-svrl__entry__3">No; defaults to <span class="ph filepath">document.ditamap</span>
                            </td>
                        </tr>
                        <tr>
                            <td class="entry align-left" headers="api__exec-svrl__entry__1">expectedresult</td>
                            <td class="entry align-left" headers="api__exec-svrl__entry__2">The expected result when invoking the transform</td>
                               <td class="entry align-left" headers="api__exec-svrl__entry__3">No; defaults to <code class="ph codeph">0</code> = success
                            </td>
                        </tr>
                        <tr>
                            <td class="entry align-left" headers="api__exec-svrl__entry__1">maxwait</td>
                            <td class="entry align-left" headers="api__exec-svrl__entry__2">The maximum time to create a document</td>
                            <td class="entry align-left" headers="api__exec-svrl__entry__3">No; defaults to 100 seconds</td>
                        </tr>
                        <tr>
                            <td class="entry align-left" headers="api__exec-svrl__entry__1">propertyfile</td>
                            <td class="entry align-left" headers="api__exec-svrl__entry__2">The name of a file holding additional properties</td>
                               <td class="entry align-left" headers="api__exec-svrl__entry__3">No; defaults to <span class="ph filepath">test.properties</span>
                            </td>
                        </tr>
                        <tr>
                            <td class="entry align-left" headers="api__exec-svrl__entry__1">transtype</td>
                            <td class="entry align-left" headers="api__exec-svrl__entry__2">The transtype to invoke when creating the document</td>
                               <td class="entry align-left" headers="api__exec-svrl__entry__3">No; this can be <code class="ph codeph">svrl</code> or any
                               DITA-OT transform that extends <code class="ph codeph">svrl</code>; defaults to <code class="ph codeph">svrl</code>
                            </td>
                        </tr>
                    </tbody></table></div>
            <pre class="pre codeblock border rounded language-xml scale-80"><code><span class="ph token tag"><span class="ph token tag"><span class="ph token punctuation">&lt;</span>exec-svrl</span> <span class="ph token attr-name">transtype</span><span class="ph token attr-value"><span class="ph token punctuation attr-equals">=</span><span class="ph token punctuation">"</span>text-rules<span class="ph token punctuation">"</span></span><span class="ph token punctuation">/&gt;</span></span></code></pre>
            <p class="p">
               runs DITA-OT using the <code class="ph codeph">text-rules</code> SVRL transtype.
            </p>
            <pre class="pre codeblock border rounded language-xml scale-80"><code><span class="ph token tag"><span class="ph token tag"><span class="ph token punctuation">&lt;</span>exec-svrl</span> <span class="ph token attr-name">transtype</span><span class="ph token attr-value"><span class="ph token punctuation attr-equals">=</span><span class="ph token punctuation">"</span>svrl-echo<span class="ph token punctuation">"</span></span> <span class="ph token attr-name">expectedresult</span><span class="ph token attr-value"><span class="ph token punctuation attr-equals">=</span><span class="ph token punctuation">"</span>1<span class="ph token punctuation">"</span></span><span class="ph token punctuation">/&gt;</span></span></code></pre>
            <p class="p">
               runs DITA-OT using the <code class="ph codeph">svrl-echo</code> SVRL transtype - the
               invocation is expected to fail with validation errors.
            </p>
        </section>
        <section class="section" id="api__exec-transtype"><h3 class="title h4 text-secondary">Exec-Transtype</h3>
            
            <p class="p">
               Execute an arbitrary DITA-OT transform in verbose mode. The test will fail if
               the result was not as expected or took too long.
            </p>
            <div><table class="table"><colgroup><col style="width:7%"><col style="width:47%"><col style="width:45%"></colgroup><thead class="thead">
                        <tr>
                            <th class="entry align-left" id="api__exec-transtype__entry__1">Attribute</th>
                            <th class="entry align-left" id="api__exec-transtype__entry__2">Description</th>
                            <th class="entry align-left" id="api__exec-transtype__entry__3">Required</th>
                        </tr>
                    </thead><tbody class="tbody">
                        <tr>
                            <td class="entry align-left" headers="api__exec-transtype__entry__1">ditamap</td>
                               <td class="entry align-left" headers="api__exec-transtype__entry__2">The DITA <code class="keyword markupname xmlelement">&lt;map&gt;</code> file
                               specifying which topics and other resources to use to create a document
                            </td>
                               <td class="entry align-left" headers="api__exec-transtype__entry__3">No; defaults to <span class="ph filepath">document.ditamap</span>
                            </td>
                        </tr>
                        <tr>
                            <td class="entry align-left" headers="api__exec-transtype__entry__1">expectedresult</td>
                            <td class="entry align-left" headers="api__exec-transtype__entry__2">The expected result when invoking the transform</td>
                               <td class="entry align-left" headers="api__exec-transtype__entry__3">No; defaults to <code class="ph codeph">0</code> = success
                            </td>
                        </tr>
                        <tr>
                            <td class="entry align-left" headers="api__exec-transtype__entry__1">maxwait</td>
                            <td class="entry align-left" headers="api__exec-transtype__entry__2">The maximum time to create a document</td>
                            <td class="entry align-left" headers="api__exec-transtype__entry__3">No; defaults to 100 seconds</td>
                        </tr>
                        <tr>
                            <td class="entry align-left" headers="api__exec-transtype__entry__1">propertyfile</td>
                            <td class="entry align-left" headers="api__exec-transtype__entry__2">The name of a file holding additional properties</td>
                               <td class="entry align-left" headers="api__exec-transtype__entry__3">No; defaults to <span class="ph filepath">test.properties</span>
                            </td>
                        </tr>
                        <tr>
                            <td class="entry align-left" headers="api__exec-transtype__entry__1">transtype</td>
                            <td class="entry align-left" headers="api__exec-transtype__entry__2">The transtype to invoke when creating the document</td>
                               <td class="entry align-left" headers="api__exec-transtype__entry__3">No; this can be <code class="ph codeph">svrl</code> or any
                               DITA-OT transform that extends <code class="ph codeph">svrl</code>; defaults to <code class="ph codeph">svrl</code>
                            </td>
                        </tr>
                    </tbody></table></div>
            <pre class="pre codeblock border rounded language-xml scale-80"><code><span class="ph token tag"><span class="ph token tag"><span class="ph token punctuation">&lt;</span>exec-svrl</span> <span class="ph token attr-name">transtype</span><span class="ph token attr-value"><span class="ph token punctuation attr-equals">=</span><span class="ph token punctuation">"</span>custom<span class="ph token punctuation">"</span></span><span class="ph token punctuation">/&gt;</span></span></code></pre>
            <p class="p">
               runs DITA-OT using the <code class="ph codeph">custom</code> transtype.
            </p>
            <pre class="pre codeblock border rounded language-xml scale-80"><code><span class="ph token tag"><span class="ph token tag"><span class="ph token punctuation">&lt;</span>exec-svrl</span> <span class="ph token attr-name">transtype</span><span class="ph token attr-value"><span class="ph token punctuation attr-equals">=</span><span class="ph token punctuation">"</span>custom<span class="ph token punctuation">"</span></span> <span class="ph token attr-name">expectedresult</span><span class="ph token attr-value"><span class="ph token punctuation attr-equals">=</span><span class="ph token punctuation">"</span>1<span class="ph token punctuation">"</span></span><span class="ph token punctuation">/&gt;</span></span></code></pre>
            <p class="p">
               runs DITA-OT using the <code class="ph codeph">custom</code> SVRL transtype - the invocation
               is expected to fail.
            </p>
        </section>
        <section class="section" id="api__get-html-article"><h3 class="title h4 text-secondary">Get-HTML-Article</h3>
            
            <p class="p">
               Loads a given HTML file and extracts the first <code class="keyword markupname xmlelement">&lt;article&gt;</code>
               element (which corresponds to a DITA topic) for further examination.
            </p>
            <div><table class="table"><colgroup><col style="width:8%"><col style="width:59%"><col style="width:32%"></colgroup><thead class="thead">
                        <tr>
                            <th class="entry align-left" id="api__get-html-article__entry__1">Attribute</th>
                            <th class="entry align-left" id="api__get-html-article__entry__2">Description</th>
                            <th class="entry align-left" id="api__get-html-article__entry__3">Required</th>
                        </tr>
                    </thead><tbody class="tbody">
                        <tr>
                            <td class="entry align-left" headers="api__get-html-article__entry__1">dir</td>
                            <td class="entry align-left" headers="api__get-html-article__entry__2">Location of the files output by the test</td>
                               <td class="entry align-left" headers="api__get-html-article__entry__3">No; defaults to <code class="ph codeph">out/html</code>
                            </td>
                        </tr>
                        <tr>
                            <td class="entry align-left" headers="api__get-html-article__entry__1">from</td>
                            <td class="entry align-left" headers="api__get-html-article__entry__2">the name of the file to extract an HTML fragment from</td>
                            <td class="entry align-left" headers="api__get-html-article__entry__3">Yes</td>
                        </tr>
                        <tr>
                            <td class="entry align-left" headers="api__get-html-article__entry__1">to</td>
                            <td class="entry align-left" headers="api__get-html-article__entry__2">Location of the output file holding the fragment of HTML to test</td>
                               <td class="entry align-left" headers="api__get-html-article__entry__3">No; defaults to <code class="ph codeph">out/fragment.html</code>
                            </td>
                        </tr>
                    </tbody></table></div>
            <pre class="pre codeblock border rounded language-xml scale-80"><code><span class="ph token tag"><span class="ph token tag"><span class="ph token punctuation">&lt;</span>get-html-article</span> <span class="ph token attr-name">from</span><span class="ph token attr-value"><span class="ph token punctuation attr-equals">=</span><span class="ph token punctuation">"</span>topics/body-text.html<span class="ph token punctuation">"</span></span><span class="ph token punctuation">/&gt;</span></span></code></pre>
            <p class="p">
               creates a file called <code class="ph codeph">fragment.html</code> holding the <code class="keyword markupname xmlelement">&lt;article&gt;</code>
               element from the <code class="ph codeph">topics/body-text.html</code> file.
            </p>
        </section>
        <section class="section" id="api__get-pdf-article"><h3 class="title h4 text-secondary">Get-PDF-Article</h3>
            
            <p class="p">
               Loads a given <code class="ph codeph">topic.fo</code> file and extracts the last <code class="ph codeph">fo.flow</code>
               element (which corresponds to a DITA topic) for further examination. Also
               remove colors, fonts and excess attributes.
            </p>
            <div><table class="table"><colgroup><col style="width:8%"><col style="width:60%"><col style="width:31%"></colgroup><thead class="thead">
                        <tr>
                            <th class="entry align-left" id="api__get-pdf-article__entry__1">Attribute</th>
                            <th class="entry align-left" id="api__get-pdf-article__entry__2">Description</th>
                            <th class="entry align-left" id="api__get-pdf-article__entry__3">Required</th>
                        </tr>
                    </thead><tbody class="tbody">
                        <tr>
                            <td class="entry align-left" headers="api__get-pdf-article__entry__1">from</td>
                            <td class="entry align-left" headers="api__get-pdf-article__entry__2">Location of the file to extract an HTML fragment from</td>
                               <td class="entry align-left" headers="api__get-pdf-article__entry__3">No; defaults to <code class="ph codeph">out/topic.fo</code>
                            </td>
                        </tr>
                        <tr>
                            <td class="entry align-left" headers="api__get-pdf-article__entry__1">to</td>
                            <td class="entry align-left" headers="api__get-pdf-article__entry__2">Location of the output file holding the fragment of FOP to test</td>
                               <td class="entry align-left" headers="api__get-pdf-article__entry__3">No; defaults to <code class="ph codeph">out/fragment.fo</code>
                            </td>
                        </tr>
                    </tbody></table></div>
            <pre class="pre codeblock border rounded language-xml scale-80"><code><span class="ph token tag"><span class="ph token tag"><span class="ph token punctuation">&lt;</span>get-pdf-article</span><span class="ph token punctuation">/&gt;</span></span></code></pre>
            <p class="p">
               creates a file called <code class="ph codeph">fragment.fo</code> holding the final <code class="keyword markupname xmlelement">&lt;fo.flow&gt;</code>
               element from the <code class="ph codeph">topics.fo</code> file.
            </p>
        </section>
    </div>
</article>
</article><div class="bs-scrollspy mt-3 mb-5 my-lg-0 mb-lg-5 px-sm-1 text-body-secondary"><nav><ul>
    <li><a class="ps-2" href="#ariaid-title1">Unit Test Plug-in</a></li>
    
    
    
    <ul>
        <li><a class="ps-2" href="#ariaid-title2">Transforms</a></li>
        
    </ul>
    <ul>
    <li><a class="ps-2" href="#ariaid-title3">Install</a></li>
    
    
    
</ul>
    <ul>
    <li><a class="ps-2" href="#ariaid-title4">Usage</a></li>
    
    <ul>
    <li><a class="ps-2" href="#ariaid-title5">Integration with GitHub Actions.</a></li>
    
    
</ul>
    <ul>
    <li><a class="ps-2" href="#ariaid-title6">Integration with Travis CI</a></li>
    
    
</ul>
    <ul>
    <li><a class="ps-2" href="#ariaid-title7">Integration with Coveralls</a></li>
    
    
</ul>
</ul>
    <ul>
    <li><a class="ps-2" href="#ariaid-title8">Unit Test File Structure</a></li>
    
    <ul>
    <li><a class="ps-2" href="#ariaid-title9">Test suite files</a></li>
    
</ul>
    <ul>
    <li><a class="ps-2" href="#ariaid-title10">Individual test files</a></li>
    
</ul>
</ul>
    <ul>
    <li><a class="ps-2" href="#ariaid-title11">Unit Testing ANT Tasks</a></li>
    
    
</ul>
</ul></nav></div></main></div><script language="javascript" src="../js/popovers.js"></script><script language="javascript" src="../js/dark-mode-toggler.js"></script><footer role="contentinfo"><!-- Footer --><footer class="text-center" style="background-color: rgba(0, 0, 0, 0.2)">
  <div class="container">
    <div class="row">
      <div class="col">
        <!-- Social Media -->
        <p class="text-center p-3">
          <!-- Linkedin -->
          <a class="btn btn-primary btn-floating m-1 text-white" style="background-color: #0082ca" href="https://www.linkedin.com/in/jason-fox-8a79563/" role="button"><i class="bi bi-linkedin"></i></a>
          <!-- Github -->
          <a class="btn btn-primary btn-floating m-1 text-white" style="background-color: #333333" href="https://github.com/jason-fox/" role="button"><i class="bi bi-github"></i></a>
        </p>
      </div>
      <div>
        <!-- Copyright -->
        <p class="text-muted p-3">
          <small>
            © 2021 - 2023 <b>Jason Fox</b>
          </small>
        </p>
      </div>
    </div>
  </div>
</footer><!-- Footer --></footer></body></html>